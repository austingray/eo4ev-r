<!DOCTYPE html>
<html>
<head>

	<title>Dat three.js doe</title>
	<style>
		#container {
			position:relative;
			display:block;
			margin:auto;
			width:1200px;
			height:600px;
			border:1px solid silver;
		}
		#gamecanvas {
			margin:auto;
			display:block;
			cursor:none;
			width:800px;
			height:600px;
			background:#ccc;
			position:absolute;
			left:0;
			top:0;
		}
		#status {
			position:absolute;
			width:400px;
			height:600px;
			right:0;
			top:0;
			background:#000;
		}
		#feed {
			position:absolute;
			top:0;
			left:0;
			width:400px;
			height:560px;
			overflow-y:scroll;
			color:#fff;
			padding:9px;
		}
		#feed div {
			word-wrap: break-word;
		}
		#input {
			position:absolute;
			width:400px;
			height:40px;
			bottom:0;
			background:#fff;
		}
		#input input {
			width:100%;
			-webkit-box-sizing:border-box;
			-moz-box-sizing:border-box;
			box-sizing:border-box;
			border:0;
			font-size:16px;
			padding:9px;
			outline:none;
		}
	</style>

	<script src="js/lib/three.js"></script>
	<script src="js/lib/threex.keyboardstate.js"></script>
	<script src="js/lib/TrackballControls.js"></script>
	<script src="js/lib/Stats.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	<script>

	  var socket = io.connect();
	  
	  socket.on('news', function (data) {
	  	var $output = $('<div></div>').attr({
	  		"class":"news"
	  	}).html(data.message);
	    $('#feed').append($output);
	    //console.log(data);
	    //socket.emit('my other event', { my: 'data' });
	  });

	  socket.on('chat', function (data) {
	  	var $output = $('<div></div>').attr({
	  		"class":"chat"
	  	}).html(data.user + ': ' + data.message);
	    $('#feed').append($output);
	  });

	  socket.on('map', function(data) {
	  	EO.map.array = data;
	  	EO.init();
	  });

	  socket.on('update', function(data) {
	  	EO.update(data);
	  });

	  socket.on('id', function(data) {
	  	console.log(data);
	  	EO.hero.id = data;
	  })

	  $(document).ready(function() {
	  	$('#input input').keydown(function(event) {
	  		if (event.which === 13) {
	  			var msg = $(this).val();
	  			$(this).val('');
	  			socket.emit('chat', { message: msg });
	  		}
			});
	  });

	</script>


</head>

<body>

<div id="container">
	<canvas id="gamecanvas"></canvas>
	<div id="status">
		<div id="feed"></div>
		<div id="input"><input type="text" /></div>
	</div>
</div>



	<script src="js/core.js"></script>
	<script>
		
		var stats = new Stats();
		stats.setMode( 1 ); // 0: fps, 1: ms, 2: mb

		// align top-left
		stats.domElement.style.position = 'absolute';
		stats.domElement.style.left = '0px';
		stats.domElement.style.top = '0px';

		document.body.appendChild( stats.domElement );

		var update = function () {

		    stats.begin();

		    // monitored code goes here

		    stats.end();

		    requestAnimationFrame( update );

		};

		requestAnimationFrame( update );

	</script>

</body>
</html>